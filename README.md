# Мой банк

## Описание:

Это учебный проект. Он будет развиваться и пополняться новыми функциями по мере наполнения меня знаниями. 
В конце концов это должно стать полноценным банковским приложением.

## Установка:

1. Клонируйте репозиторий:
```
git clone https://github.com/lukyanov-m/Homework.git
```
2. Установите зависимости:

Смотри pyproject.toml

## Тестирование:
+ Тесты расположены в папке tests
+ **Фреймворк:** pytest
+ **Линтеры:** flake8, isort
### Запуск тестов
+ Если требуется установите зависимости:
1. poetry add pytest
2. poetry add pytest-cov
+ Запуск всех тестов: pytest 
+ Запуск всех тестов с покрытием: pytest --cov
+ Создать отчет о покрытии тестов: pytest --cov=src --cov-report=html


## Использование:

В модуле main можете подставить свои данные и получить соответствующие результаты.

Функции реализованные в проекте:
* Модуль masks:
1. get_mask_card_number - *Функция разбивает номер карты по блокам и скрывает часть этого номера*
2. get_mask_account - *Функция возвращает последние четыре цифры номера счета*
* Модуль widget:
3. mask_account_card - *Принимает тип и номер карты или счета, а возвращает тип и замаскированный номер.
   В зависимости от принятых данных, ссылается на функции* **get_mask_account** *или* **get_mask_card_number.**
4. get_date - *Принимает строку с датой и временем ГГГГ-ММ-ДД+время, возвращает дату в формате ДД.ММ.ГГГГ*
* Модуль processing:
5. filter_by_state - *Функция принимает список словарей и возвращает новый список отфильтрованный по ключу state*
6. sort_by_date - *Функция принимает список словарей с данными и сортирует его по указанному в словаре времени*
* Модуль generators:
7. filter_by_currency - *Функция генератор принимает список словарей с транзакциями и необходимую валюту,
   возвращает только словари с указанной валютой.*
8. transaction_descriptions - *Генератор принимает список словарей с транзакциями, возвращает только описание транзакции.*
9. card_number_generator - * Функция генератор принимает диапазон чисел в котором создает номера в формате XXXX XXXX XXXX XXXX*
* Модуль decorators:
10. log - *Декоратор записывает в указанный filename файл результат выполнения функции, в случае ошибки запишет эту ошибку
    и принятые функцией параметры. Если filename не указан, выведет информацию в консоль.*
* Модуль utils:
11. get_financial_transaction_data - *Функция принимает путь до json файла, возвращает список словарей с данными о финансовых транзакциях*
12. get_transaction_amount - *Функция, принимает на вход транзакцию и возвращает сумму транзакции в рублях.
    Если транзакция была в USD или EUR, происходит обращение к внешнему API для получения
    текущего курса валют и конвертации суммы операции в рубли*
* Модуль external_api.py
13. get_currency_conversion - *Функция конвертации валюты*